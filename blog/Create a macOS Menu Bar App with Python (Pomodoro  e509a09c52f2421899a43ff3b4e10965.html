
    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width">
            <title>Create a macOS Menu Bar App with Python (Pomodoro  e509a09c52f2421899a43ff3b4e10965</title>
            
            
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-fonts@1.1.1/fonts/inter.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <link rel="stylesheet" href="https://unpkg.com/github-syntax-dark@latest/lib/github-dark.css"/>
    
        </head>
        <body>
            <header>
                <nav>
                    <a href="https://patricktrainer.github.io/static-site">Home</a> /
                    <a href="https://github.com/patricktrainer">GitHub</a> / 
                </nav>
            </header>
            <h1><a id="user-content-create-a-macos-menu-bar-app-with-python-pomodoro-timer--camillo-visini" class="anchor" aria-hidden="true" href="#create-a-macos-menu-bar-app-with-python-pomodoro-timer--camillo-visini"><span aria-hidden="true" class="octicon octicon-link"></span></a>Create a macOS Menu Bar App with Python (Pomodoro Timer) ‚Äì Camillo Visini</h1>
<p>Created: Jul 13, 2020 2:44 AM
URL: <a href="https://camillovisini.com/create-macos-menu-bar-app-pomodoro/" rel="nofollow">https://camillovisini.com/create-macos-menu-bar-app-pomodoro/</a></p>
<p>![blog.png](Create%20a%20macOS%20Menu%20Bar%20App%20with%20Python%20(Pomodoro%20%20e509a09c52f2421899a43ff3b4e10965/blog.png)</p>
<p>On my Mac, I use the menu bar countless times per day. In this post we will go through the process of creating a custom macOS menu bar app using Python. As an example, we will create a <a href="https://en.wikipedia.org/wiki/Pomodoro_Technique" rel="nofollow"><g-emoji class="g-emoji" alias="tomato" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f345.png">üçÖ</g-emoji> pomodoro</a> app, which you can use to boost your productivity and manage your time from the convenience of your menu bar. It serves as a starting point for customization to suit your individual needs ‚Äì you can even use this code as a boilerplate to create a radically different application!</p>
<p>We will be using the following software:</p>
<ul>
<li>
<strong>Python 3</strong> and <strong>PyCharm</strong> as an IDE</li>
<li>
<strong><a href="https://github.com/jaredks/rumps">Rumps</a></strong> ‚Üí Ridiculously Uncomplicated macOS Python Statusbar apps</li>
<li>
<strong><a href="https://py2app.readthedocs.io/en/latest/" rel="nofollow">py2app</a></strong> ‚Üí For creating standalone macOS apps from Python code <em>(how cool is that?)</em>
</li>
</ul>
<h2><a id="user-content-step-1-set-up-project-directory-and-install-dependencies" class="anchor" aria-hidden="true" href="#step-1-set-up-project-directory-and-install-dependencies"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 1: Set up project directory and install dependencies</h2>
<p>In this step we will install all requirements on our local machine. Run the following commands in your terminal to get started and set up the project directory:</p>
<pre><code>export PROJECT_NAME=pomodoro
mkdir ~/PycharmProjects/$PROJECT_NAME
cd ~/PycharmProjects/$PROJECT_NAME
touch pomodoro.py setup.py

</code></pre>
<p>Be sure to install both <code>rumps</code> and <code>py2app</code> via pip (on my macOS). Enter the following in your terminal:</p>
<pre><code>pip3 install -U py2app # this will install py2app using pip, or to upgrade to the latest released version of py2app
pip3 install -U rumps # this will install rumps using pip, or to upgrade to the latest released version of rumps

</code></pre>
<h2><a id="user-content-step-2-basic-example" class="anchor" aria-hidden="true" href="#step-2-basic-example"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 2: Basic example</h2>
<p>Open the project directory in your favorite editor or IDE ‚Äì in my case PyCharm ‚Äì by typing:</p>
<pre><code>charm .

</code></pre>
<p>In <code>pomodoro.py</code> we need to set up the following boilerplate code in order to get started:</p>
<pre><code>import rumps

class PomodoroApp(object):
    def __init__(self):
        self.app = rumps.App("Pomodoro", "üçÖ")

    def run(self):
        self.app.run()

if __name__ == '__main__':
    app = PomodoroApp()
    app.run()

</code></pre>
<p>If you execute the python program using <code>python3 pomodoro.py</code>, you will notice a new addition to your menu bar ‚Äì albeit with limited functionality, as you can see‚Ä¶</p>
<p>A barely functional menu bar app...</p>
<h2><a id="user-content-step-3-full-implementation" class="anchor" aria-hidden="true" href="#step-3-full-implementation"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 3: Full implementation</h2>
<p>Now we will implement the actual functionality of our pomodoro menu bar app ‚Äì see the complete code for <code>pomodoro.py</code> below:</p>
<pre><code>import rumps

class PomodoroApp(object):
    def __init__(self):
        self.config = {
            "app_name": "Pomodoro",
            "start": "Start Timer",
            "pause": "Pause Timer",
            "continue": "Continue Timer",
            "stop": "Stop Timer",
            "break_message": "Time is up! Take a break :)",
            "interval": 1500
        }
        self.app = rumps.App(self.config["app_name"])
        self.timer = rumps.Timer(self.on_tick, 1)
        self.interval = self.config["interval"]
        self.set_up_menu()
        self.start_pause_button = rumps.MenuItem(title=self.config["start"], callback=self.start_timer)
        self.stop_button = rumps.MenuItem(title=self.config["stop"], callback=None)
        self.app.menu = [self.start_pause_button, self.stop_button]

    def set_up_menu(self):
        self.timer.stop()
        self.timer.count = 0
        self.app.title = "üçÖ"

    def on_tick(self, sender):
        time_left = sender.end - sender.count
        mins = time_left // 60 if time_left &gt;= 0 else time_left // 60 + 1
        secs = time_left % 60 if time_left &gt;= 0 else (-1 * time_left) % 60
        if mins == 0 and time_left &lt; 0:
            rumps.notification(title=self.config["app_name"], subtitle=self.config["break_message"], message='')
            self.stop_timer()
            self.stop_button.set_callback(None)
        else:
            self.stop_button.set_callback(self.stop_timer)
            self.app.title = '{:2d}:{:02d}'.format(mins, secs)
        sender.count += 1

    def start_timer(self, sender):
        if sender.title.lower().startswith(("start", "continue")):
            if sender.title == self.config["start"]:
                self.timer.count = 0
                self.timer.end = self.interval
            sender.title = self.config["pause"]
            self.timer.start()
        else:
            sender.title = self.config["continue"]
            self.timer.stop()

    def stop_timer(self):
        self.set_up_menu()
        self.stop_button.set_callback(None)
        self.start_pause_button.title = self.config["start"]

    def run(self):
        self.app.run()

if __name__ == '__main__':
    app = PomodoroApp()
    app.run()

</code></pre>
<p>By executing the python program again using <code>python3 pomodoro.py</code>, you can see our menu bar app in its full glory:</p>
<p>Now we're getting there!</p>
<p>Time's ticking...</p>
<p>And as soon as the timer reaches zero, it will remind you to take a break via a notification!</p>
<p>In the next step we will go ahead and create a macOS application using <code>py2app</code> so you don‚Äôt have to execute it via Python every single time. It needs to be ready for every day use, and that means <a href="https://support.apple.com/guide/mac-help/open-items-automatically-when-you-log-in-mh15189/mac" rel="nofollow">adding it to the login items</a> of your Mac!</p>
<h2><a id="user-content-step-4-create-macos-app-from-our-python-code" class="anchor" aria-hidden="true" href="#step-4-create-macos-app-from-our-python-code"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 4: Create macOS app from our python code</h2>
<p>In <code>setup.py</code> we need to add the following code, which provides all the necessary instructions to create the application bundle (app name, app version, app icon, etc.) to <code>py2app</code> in form of a setup script:</p>
<pre><code>from setuptools import setup

APP = ['pomodoro.py']
DATA_FILES = []
OPTIONS = {
    'argv_emulation': True,
    'iconfile': 'icon.icns',
    'plist': {
        'CFBundleShortVersionString': '0.2.0',
        'LSUIElement': True,
    },
    'packages': ['rumps'],
}

setup(
    app=APP,
    name='Pomodoro',
    data_files=DATA_FILES,
    options={'py2app': OPTIONS},
    setup_requires=['py2app'], install_requires=['rumps']
)

</code></pre>
<p>Are you missing the icon file? You can download the file I used from the <a href="https://github.com/visini/pomodoro/blob/master/icon.icns">GitHub repository</a>.</p>
<p>Now you can go ahead and create your <code>Pomodoro.app</code> bundle using <code>py2app</code>. Type the following in your terminal:</p>
<pre><code>python3 setup.py py2app

</code></pre>
<p>The application bundle will be created in your project directory under <code>/dist/Pomodoro.app</code>.</p>
<h2><a id="user-content-conclusion" class="anchor" aria-hidden="true" href="#conclusion"><span aria-hidden="true" class="octicon octicon-link"></span></a>Conclusion</h2>
<p>I‚Äôve implemented a similar menu bar app with some additional functionality. It‚Äôs called <a href="https://github.com/visini/timebox">Timebox</a>. Check it out and let me know what you think!</p>
<p>I hope you enjoyed this article ‚Äì please let me know if you have any questions or if you run into any issues.</p>
<h3><a id="user-content--lets-stay-in-touch" class="anchor" aria-hidden="true" href="#-lets-stay-in-touch"><span aria-hidden="true" class="octicon octicon-link"></span></a><g-emoji class="g-emoji" alias="seedling" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f331.png">üå±</g-emoji> Let's stay in touch!</h3>
<p>If you'd like to get notified about updates, feel free to <a href="https://twitter.com/@camillovisini" rel="nofollow">follow me on Twitter</a>. Enter your email address below to receive an email whenever I write a new post. <strong>Quality content only!</strong></p>
<p>Note: You may unsubscribe at any time by clicking on the unsubscribe link included at the bottom of every email.</p>

        </body>
    </html>
    