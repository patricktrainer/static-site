
    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width">
            <title>Churn 2c842cb9cfdc4911b51ca0d13af5e74e</title>
            
            
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-fonts@1.1.1/fonts/inter.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <link rel="stylesheet" href="https://unpkg.com/github-syntax-dark@latest/lib/github-dark.css"/>
    
        </head>
        <body>
            <header>
                <nav>
                    <a href="https://patricktrainer.github.io/static-site">Home</a> /
                    <a href="https://github.com/patricktrainer">GitHub</a> / 
                </nav>
            </header>
            <h1><a id="user-content-churn" class="anchor" aria-hidden="true" href="#churn"><span aria-hidden="true" class="octicon octicon-link"></span></a>Churn</h1>
<p>Created: Jan 7, 2020 7:42 PM
Tags: Data, How To, Startup
URL: <a href="https://link.medium.com/BfO0k8Ml42" rel="nofollow">https://link.medium.com/BfO0k8Ml42</a></p>
<p>Many smart people will tell you to obsess over your churn rate.</p>
<p><a target="_blank" rel="noopener noreferrer" href="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/00XGLD-luE8nOjHBl.png"><img src="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/00XGLD-luE8nOjHBl.png" alt="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/00XGLD-luE8nOjHBl.png" style="max-width: 100%;"></a></p>
<p>According to Andreessen Horowitz, this number is <a href="https://a16z.com/2015/08/21/16-metrics/" rel="nofollow">one of the top 16 metrics</a> to measure a SaaS startup by. Well, sorry Andreessen, and sorry Horowitz, but this just isn't right.</p>
<p>It’s counterintuitive, but it’s a statistical fact: This number actually <strong>tells you nothing useful about churn</strong>, but really relates to the age of the subscriptions you have. It will in most cases go down on it’s own, and, absurdly, the only way to keep it from going down is to have very high growth. So the number will literally <strong>only look <em>bad</em> if your business is doing extremely <em>well</em></strong>, and optimizing for it will be directly counter-productive. The error here is a simple statistical mistake that is easy to make, and luckily also easy to understand and avoid.</p>
<p>If you run a subscription based SaaS business, you’re likely very concerned with how long you can keep your customers. I run a JavaScript exception tracking service, and the health of this business is fully determined by how many customers we bring in, and how long we can keep them. On the surface, <em>churn rate</em> may seem like a natural proxy for changes in <em>customer lifetimes</em>. Let’s dig into why that is not true.</p>
<p>Computing a churn rate <strong>assumes that a customer is equally likely to leave at any time</strong>, no matter how long they've been subscribed to you. This is almost certainly not true. In fact, as we will see, having a constant churn probability over time essentially implies that you’ll <em>never have long term customers</em>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0j3iK6M7Jt1TCV-NX.png"><img src="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0j3iK6M7Jt1TCV-NX.png" alt="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0j3iK6M7Jt1TCV-NX.png" style="max-width: 100%;"></a></p>
<p><em>If a user has a constant churn probability over time, this implies that customer lifetimes come from an Exponential distribution.</em></p>
<p>If you have a constant churn of <code>c</code> per month, the probability that a customer stays subscribed for <code>n</code> months is <code>(1-c)^n</code>. This implies that customer lifetimes come from the <a href="https://en.wikipedia.org/wiki/Geometric_distribution" rel="nofollow">Geometric distribution</a>. If customers can quit the subscription at any time, we have continuous time and should use the continuous time analogue, the <a href="https://en.wikipedia.org/wiki/Exponential_distribution" rel="nofollow">Exponential distribution</a>.</p>
<p>The problem is, your customer is not equally likely to cancel their subscription at any time. Most likely, you have a situation where the drop-off in customers is higher in the first few days than it is later. This is even more so if you have a free trial period for your product.</p>
<p>If the churn probability gets lower the longer the customer has been subscribed, you could model that as <code>c/(t+1)</code>, where <code>t</code> is the timestep (e.g. number of days the customer has been subscribed), and <code>c</code> is some constant. In this case, this implies that customer lifetimes comes from a <a href="https://en.wikipedia.org/wiki/Lomax_distribution" rel="nofollow">Lomax distribution</a>. This is equivalent to a Pareto distribution shifted to start at 0.</p>
<p><a target="_blank" rel="noopener noreferrer" href="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0_ceJxW5UQmjQze15.png"><img src="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0_ceJxW5UQmjQze15.png" alt="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0_ceJxW5UQmjQze15.png" style="max-width: 100%;"></a></p>
<p><em>The Lomax distribution can express churn probabilities that get lower with time.</em></p>
<p>If you suspect that churn probability per day may <em>increase</em> the longer a user has been subscribed, the Lomax distribution won’t work for you. Instead you could enlist the help of Swedish statistician Waloddi Weibull. The <a href="https://en.wikipedia.org/wiki/Weibull_distribution" rel="nofollow">Weibull distribution</a> can express both decreasing, flat, and increasing probabilities of a customer quitting. This makes it a popular choice for modeling customer lifetimes.</p>
<p><a target="_blank" rel="noopener noreferrer" href="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/09YlKCitrtdWj4vtc.png"><img src="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/09YlKCitrtdWj4vtc.png" alt="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/09YlKCitrtdWj4vtc.png" style="max-width: 100%;"></a></p>
<p><em>The Weibull distribution can express both growing and shrinking churn probabilities.</em></p>
<p>Now let’s see why properly modeling this is important.</p>
<p>Let’s measure churn the wrong way, and see where it takes us. Let’s say customer lifetimes come from a Lomax distribution. Let’s also say you have a business that is in terrible shape, where the number of new sign ups per day is falling by one per day. How will this look on the churn rate? We can simulate it and find out.</p>
<p>Keep in mind, in each of the examples below we simulate lifetimes from the same customer lifetime distribution, and this distribution <strong>does not change</strong> over time.</p>
<p><a target="_blank" rel="noopener noreferrer" href="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0ES_1q-LJJ68eBjCr.png"><img src="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0ES_1q-LJJ68eBjCr.png" alt="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0ES_1q-LJJ68eBjCr.png" style="max-width: 100%;"></a></p>
<p><em>With a shrinking business, churn appears to improve because subscriptions are getting fewer and older.</em></p>
<p>This is clearly a dying business, yet the churn rate graph is looking great! <strong>The churn rate per day is falling steadily, even if we know that there is no change in customer lifetimes in our model.</strong></p>
<p>So what’s going on? This sharp fall in churn rate is a consequence of the fact that we’re not getting new customers. Because we’re not growing, a bigger share of our customers have been around for a long time, which means they’re less likely to churn, which means our daily churn graph goes down more than it would otherwise. This change on the population level happens despite there being no change in underlying individual customer lifetimes.</p>
<p>Let’s change this into a scenario where your business is experiencing insane growth. We’ll keep the customer lifetimes exactly the same, but change it so that the number of new sign ups per day is growing superlinearly.</p>
<p><a target="_blank" rel="noopener noreferrer" href="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0n_xzVSFBkmhPXZD1.png"><img src="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0n_xzVSFBkmhPXZD1.png" alt="Churn%202c842cb9cfdc4911b51ca0d13af5e74e/0n_xzVSFBkmhPXZD1.png" style="max-width: 100%;"></a></p>
<p><em>With a growing business, churn</em> rate <em>appears to not change, only because most subscriptions are new.</em></p>
<p>Even if the customer lifetimes are unchanged from before, the churn rate graph here is flat. An investor would frown and say we’re doing nothing to improve how well we retain our customers. In reality, the only reason the graph looks “bad” has nothing to do with churn, it is because we’re doing insanely well at getting new sign ups.</p>
<p><strong>If you are steering yourself and your team on the basis of this metric, you’re rewarding yourself for stifling growth and punishing yourself for growing.</strong> Obviously, this is 100% counterproductive.</p>
<p>As you might have guessed from the previous paragraphs, we should model the <em>distribution of customer lifetimes</em>, and we should do it in a <em>statistically sound way</em>. Lomax and Weibull distributions are good choices of model.</p>
<p>The part where this gets tricky is that we’ll have two types of data: The customers that have quit, and the customers that are still subscribed. It’s only our ex-customers that give us a total lifetime to work with. For our still-subscribed customers, we only know that their subscription has lasted up until now, and we don’t know how much longer it will last into the future. In statistical lingo, we have what is called <em>right-censored data</em>.</p>
<p>Luckily there’s a way to use all our data, even from our still-subscribed customers.</p>
<p>Choosing between Weibull or Lomax (or any other distribution) has no simple answer. Weibull is more flexible in that it can express growing, shrinking and flat churn probabilities. However, this expressive power will not help you if your data is fundamentally Lomax-like. First and foremost, base your choice on your knowledge of the business that you’re in. If you have any prior knowledge about how churn probabilities will develop, base your choice of distribution on that. There are also various <a href="https://www.weibull.com/hotwire/issue71/relbasics71.htm" rel="nofollow">goodness of fit</a> tests you could use to inform this decision. The truth is, any choice of distribution will be wrong to some degree, so you need to make a judgment call as to what fits your situation the best, based both on both your data and your prior knowledge. For the purposes of the rest of this post, we’ll just fit both distributions and disregard the question of which suits us the best.</p>
<p>The probability distributions we’ll model are defined by their parameters. We want to find the parameters that fit the data best. To start, we want to make a guess at these parameters, and have a way to tell how good our guess was. Luckily, we have a statistically sound way of knowing how good a guess is given the data we have. Extra luckily, this is also true when we have censored data. This function that tells us how likely our parameters are given the data we have is called the Likelihood function. We get it by looking up the <a href="https://en.wikipedia.org/wiki/Probability_density_function" rel="nofollow">probability density function</a> value for the uncensored data points and the <a href="https://en.wikipedia.org/wiki/Survival_function" rel="nofollow">survival function</a> value for each of the censored data points, and multiplying all these values together.</p>
<p>Next, we remember that computers suck at multiplying numbers close to zero, so we instead take the log of each number and sum them together. We can do this without changing where the function has its maximum. We’ll use NumPy and the <a href="https://docs.scipy.org/doc/scipy/reference/stats.html" rel="nofollow">statistics</a> and <a href="https://docs.scipy.org/doc/scipy/reference/optimize.html" rel="nofollow">optimization</a> packages in SciPy to compute this. Here’s the Python code.</p>
<p>Next, we will use a function maximizer to find the parameters that maximize our function <code>L</code>. (Actually we only have function <em>minimizers</em>, so we'll equivalently minimize <code>-L</code>.)</p>
<p>What we’ve just done is called Maximum Likelihood Estimation (MLE). For a more thorough derivation of this estimator under censored data, see <a href="https://www4.stat.ncsu.edu/~dzhang2/st745/chap3.pdf" rel="nofollow">this PDF from Daowen Zhang at NCSU.</a></p>
<p>Now that we have an estimate of the distribution parameters, we can look at the mean and medians of the distribution.</p>
<p>This outputs:</p>
<pre><code>weibull shape=1.0935179324818296, scale=122.3601743694174 weibull mean 118.29884582009447 weibull median 87.51413316428012 lomax shape=101.65488165157542, scale=12575.372370928875 lomax mean 124.93554375692996 lomax median 86.03983407302042
</code></pre>
<p>The mean tells us the <em>mean</em> customer lifetime, in days. Multiply this by what you make per customer per day, and you have your Customer Lifetime Value.</p>
<p>The median tells us the <em>typical</em> customer lifetime. This is <em>smaller</em> than the mean, because the mean is dominated by the less likely, very large values. The existence of these rarer, very long term customers matter a lot to the outlook of your business, as we will see.</p>
<p>Let’s look at customer survival for two business. Each will have customer lifetimes coming from a Lomax distribution. The distributions will both have the same <em>median</em> customer lifetime, but one has a larger <em>mean</em> lifetime than the other. In other words, one has more long term customers than the other.</p>
<p>The company following the orange line has higher drop-off of customers in the beginning, but lower drop-off towards the end. The effect on revenue is massive. If you’re following the orange line rather than the blue, <strong>you’re making 2.5 times more money</strong>. Keep in mind that the <em>typical customers</em> (found by the median) stick around equally long in either company, but it’s the rare long term customers that shift the Lifetime Customer Value massively in favor of the orange company.</p>
<p>Let’s simulate the Monthly Recurring Revenue (MRR) for these two businesses. We’ll give them each 10 new sign-ups pers month. The difference in the end is massive.</p>
<p>The two companies have similar trajectories in the start, but eventually the effect of the rarer, long term customers show themselves. The orange company will eventually make 2.5x higher MRR than the blue company.</p>
<p>Fat tails give you rare events of extreme proportions. In our case it would be rare customer lifetimes that last very long. As we've seen, fat tails in customer lifetime distributions can have massive effects on your long term revenue. However, accurately estimating these turns out to be hard or impossible.</p>
<p>Most people’s intuitions fail when it comes to these distributions. Here’s an example, due to <a href="https://medium.com/u/f138bf5466fe?source=post_page-----cbab072cd992----------------------" rel="nofollow">Nassim Nicholas Taleb</a>. Let’s assume we’re dealing with an 80/20 Pareto distribution (or the analogue Lomax(1.13) distribution). Let’s say we’re computing the sample mean. Where it takes 30 observations for a Gaussian to stabilize the mean up to a given level, it takes <a href="http://fooledbyrandomness.com/DarwinCollege.pdf" rel="nofollow">10¹¹ observations from the Pareto to bring the sample error down by the same amount.</a> So if you have Pareto 80/20 distributed customer lifetimes, <strong>you need 100 billion customers before the sample mean lifetime is accurate.</strong> Good luck! (Note that this is for the sample mean, i.e. summing sample lifetimes and dividing by count. It does not directly apply to the ML estimator we've made above.)</p>
<p>While your customer lifetimes might not follow such an extreme distribution, it serves to make the point that if the tail is sufficiently fat, getting proper estimates might be harder than we’re used to when not in presence of fat tails.</p>
<p>Another more unavoidable source of mis-estimation is the fact that we can’t see into the future. Consider this: Let’s say 5% of your customers stay subscribed for 10 years. You definitely will not observe this until your business has been around for 10 years. You will never see a 2-year customer in a 1-year old business.</p>
<p>Estimating with censored data helps with this a bit, but we’ll still have a fundamental blindness to the subscription length of long term customers. For a business looking at customer lifetimes, this can be a source of optimism, since the uncertainty is mostly in the direction of longer lifetimes.</p>
<p>The numbers we've just computed are perhaps the most central of all for a subscription business, yet it seems like most people have never been taught how to properly compute them. Feel free to use the code in this post to compute customer lifetimes for your business.</p>

        </body>
    </html>
    